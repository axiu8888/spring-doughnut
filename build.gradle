ext {

  springbootVersion = "2.7.8"
  springDependencyManagementVersion = "1.0.15.RELEASE"
  springExperimentalAotVersion = "0.12.1"
  graalvmBuildtoolsNativeVersion = "0.9.18"
  springIntegrationVersion = "5.5.16"

  aspectjVersion = "1.9.19"
  swaggerVersion = "3.0.0"
  jjwtVersion = "0.11.5"
  nettyAllVersion = '4.1.85.Final'
  vertxVersion = "4.3.7"

  rxJavaVersion = '2.2.21'
  okHttpVersion = '4.10.0'
  retrofitVersion = '2.9.0'

  mysqlVersion = "8.0.32"
  druidVersion = "1.2.15"
  mybatisPlusVersion = "3.5.3"
  pagehelperVersion = "1.4.6"

  try {
    def props = new Properties()
    props.load(new FileReader("${getRootDir()}/nexus.properties"))
    repoUrl = props["repoUrl"]
    repoUsername = props["repoUsername"]
    repoPassword = props["repoPassword"]
  } catch(e) {
    e.printStackTrace()
  }
}

allprojects {

  apply plugin: 'java'

  group = "com.benefitj.spring"
  version = "2.2.1-SNAPSHOT"

  sourceCompatibility = JavaVersion.VERSION_15
  targetCompatibility = JavaVersion.VERSION_15

  ext {
    groupId = "$group"
    artifactPrefix = ""
    artifactId = "${getProject().name}"
    versionId = "${version}"

    // 默认是spring环境
    springEnv = true

    manifestAttributes = [
        "version"   : "$version",
        "build-date": "${new Date().format('yyyy-MM-dd')}",
        "author"    : "axiu8888",
        "home"      : "https://github.com/axiu8888/${rootProject.name}",
    ]
  }

  dependencies {
    def commons = project(":commons")
    if (project != commons) {
      compileOnly(commons)
      testImplementation(commons)
    }
  }

  repositories {
    maven { url("https://maven.aliyun.com/repository/google") }
    maven { url("https://maven.aliyun.com/repository/central") }
    maven { url("https://maven.aliyun.com/repository/gradle-plugin") }
    maven { url("https://maven.aliyun.com/repository/public") }
    maven { url("https://maven.aliyun.com/repository/jcenter") }
    maven { url 'https://repo.spring.io/milestone' }
    maven { url 'https://repo.spring.io/release' }
    maven { url 'https://oss.sonatype.org/content/repositories/snapshots/' }
    mavenCentral()
    try{
      maven {
        url = "${repoUrl}"
        allowInsecureProtocol = true
        credentials {
          username "${repoUsername}"
          password "${repoPassword}"
        }
      }
    } catch(e) {}
  }

}

