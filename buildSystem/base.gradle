apply plugin: 'java'
apply plugin: 'maven'

apply from: "${getRootDir()}/buildSystem/repository.gradle"

//archivesBaseName = "${group}"
archivesBaseName = "${getProject().name}"

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

tasks.withType(Javadoc) {
    options.encoding = "UTF-8"
}

task sourceJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

artifacts.archives sourceJar

configurations {
    developmentOnly
    runtimeClasspath {
        extendsFrom developmentOnly
    }
    compileOnly {
        extendsFrom annotationProcessor
    }
}

ext {
    lombokVersion = "1.18.22"
    jacksonVersion = "2.13.1"
    guavaVersion = '31.0.1-jre'
    fastjsonVersion = '1.2.79'
    commonsIOVersion = "2.11.0"
    commonsLang3Version = "3.12.0"
    slf4jVersion = '1.7.32'
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation fileTree(dir: 'libs/jar', include: ['*.jar'])
    compileOnly fileTree(dir: 'libs/source', include: ['*.jar'])

    annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
    testAnnotationProcessor "org.projectlombok:lombok:${lombokVersion}"

    //compileOnly("org.slf4j:slf4j-log4j12:${slf4jVersion}")
    testCompileOnly("org.slf4j:slf4j-log4j12:${slf4jVersion}")

    def deps = [
            "javax.inject:javax.inject:1",
            "com.google.code.findbugs:jsr305:3.0.2",
            "org.projectlombok:lombok:${lombokVersion}",
            "commons-io:commons-io:${commonsIOVersion}",
            "commons-beanutils:commons-beanutils:1.9.4",
            "org.apache.commons:commons-lang3:${commonsLang3Version}",
            "com.google.guava:guava:${guavaVersion}",
            "com.alibaba:fastjson:${fastjsonVersion}",
            //"org.slf4j:slf4j-log4j12:${slf4jVersion}",

            "com.fasterxml.jackson.core:jackson-core:${jacksonVersion}",
            "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}",
            "com.fasterxml.jackson.core:jackson-annotations:${jacksonVersion}",

    ]

    deps.forEach {
        implementation it
        testImplementation it
    }

    testCompile 'junit:junit:4.13.2'

}
